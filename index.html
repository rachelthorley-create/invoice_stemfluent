<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>STEMfluent — Invoice Generator (Standalone)</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{--accent:#111;--muted:#7a7a7a;--pageW:794px;--pageH:1123px}
html,body{height:100%;margin:0;font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
.app{display:flex;gap:24px;padding:20px;background:#f4f4f6;min-height:100vh;box-sizing:border-box}
.panel{width:360px;background:#fff;padding:18px;border-radius:8px;box-shadow:0 6px 20px rgba(12,12,12,0.06)}
.panel h2{margin-top:0;font-size:18px}
label{display:block;font-size:13px;margin:12px 0 6px;color:var(--muted)}
input[type=text], input[type=number], textarea, select{width:100%;padding:8px;border:1px solid #e5e5e5;border-radius:6px;font-size:14px;box-sizing:border-box}
textarea{min-height:72px}
button{background:#111;color:#fff;border:0;padding:10px 12px;border-radius:6px;cursor:pointer}
.btn-ghost{background:#fff;border:1px solid #ddd;color:#111}
.small{font-size:12px}
.canvas-wrap{flex:1;display:flex;justify-content:center;align-items:flex-start;padding:20px}
.page{width:794px;height:1123px;background:#fff;position:relative;box-shadow:0 10px 30px rgba(10,10,10,0.08);overflow:hidden}
.bgsvg{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none}
.content{position:relative;padding:72px 80px;color:#111;line-height:1.6}
.logo{position:absolute;right:80px;top:60px;text-align:right}
.logo h1{margin:0;font-size:28px}
.company-meta{font-size:12px;color:var(--muted);margin-top:6px}
.big-title{font-size:96px;letter-spacing:6px;margin:72px 0}
.meta{display:flex;justify-content:space-between;margin-bottom:32px}
table.items{width:100%;border-collapse:collapse;margin-top:24px}
table.items thead td{font-weight:700;padding:10px 6px;border-bottom:2px dotted rgba(0,0,0,0.08)}
table.items tbody td{padding:14px 6px;border-bottom:1px dotted rgba(0,0,0,0.06)}
td.amount{text-align:right}
.remove-btn{background:#fff;border:1px solid #ccc;color:#444;border-radius:4px;cursor:pointer;padding:2px 6px;font-size:11px}
.total-row{display:flex;justify-content:flex-end;margin-top:36px;font-size:22px;font-weight:700}
.discount-row{display:flex;justify-content:flex-end;margin-top:8px;font-size:16px;color:var(--muted)}
.bank{margin-top:48px;border-top:1px dotted rgba(0,0,0,0.08);padding-top:24px}
.bank b{display:inline-block;width:130px}
.footer{position:absolute;left:0;right:0;bottom:20px;text-align:center;color:var(--muted);font-size:12px}
@media (max-width:1000px){.app{flex-direction:column}.panel{width:auto}}
</style>
</head>
<body>
<div class="app">
<div class="panel">
<h2>Invoice controls</h2>

<label>Currency</label>
<select id="currencySelect">
<option value="GBP">GBP (£)</option>
<option value="USD">USD ($)</option>
<option value="EUR">EUR (€)</option>
</select>

<label>Invoice number</label>
<input id="invoiceNumber" type="number" value="30" min="1"/>

<label>Date</label>
<input id="invoiceDate" type="text" value="1/11/2025"/>

<label>Bill to</label>
<input id="billTo" type="text" value="FAO phoenixwindsori"/>

<label>Discount %</label>
<input id="discount" type="number" value="0" min="0" max="100"/>

<div style="margin-top:12px">
<button id="addItemBtn" class="btn-ghost">Add item</button>
<button id="clearItems" class="btn-ghost">Clear</button>
</div>

<label style="margin-top:14px">Export</label>
<button id="exportPng">PNG</button>
<button id="exportPdf">PDF</button>

</div>

<div class="canvas-wrap">
<div id="invoicePage" class="page">
<div class="content">
<div class="logo">
<h1>STEMfluent.</h1>
<div class="company-meta">Registered company: 14959530<br>Churchill College, Cambridge, CB3 0DS</div>
</div>

<div class="big-title">INVOICE</div>

<div class="meta">
<div>
<div><b>Invoice No:</b> <span id="lblInvoice">00000030</span></div>
<div><b>Bill to:</b> <span id="lblBill">FAO phoenixwindsori</span></div>
</div>
<div>
<div><b>Date:</b> <span id="lblDate">1/11/2025</span></div>
</div>
</div>

<table class="items">
<thead>
<tr>
<td>Item</td>
<td>Description</td>
<td>Qty</td>
<td class="amount" id="amountHeader">Amount / £</td>
<td></td>
</tr>
</thead>
<tbody id="itemsBody"></tbody>
</table>

<div class="discount-row" id="discountRow" style="display:none"></div>
<div class="total-row">Total: <span id="totalValue">£0.00</span></div>

<div class="bank">
<div><b>Bank Name:</b> Rachel Thorley, stemfluent limited</div>
<div><b>Bank Account:</b> 04-00-03 32508524</div>
<div><b>Bank:</b> Monzo bank</div>
</div>

<div class="footer">
Email: rachelthorley@gmail.com
</div>

</div>
</div>
</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
const currencySymbols={GBP:"£",USD:"$",EUR:"€"};
const state={
currency:"GBP",
invoiceNumber:30,
date:"1/11/2025",
billTo:"FAO phoenixwindsori",
items:[{desc:"Custom engraved plant labels",qty:3,unit:5.99}],
discount:0
};

function symbol(){return currencySymbols[state.currency];}
function fmt(n){return symbol()+Number(n).toFixed(2);}

function renderInvoice(){
document.getElementById("lblInvoice").textContent=String(state.invoiceNumber).padStart(8,"0");
document.getElementById("lblDate").textContent=state.date;
document.getElementById("lblBill").textContent=state.billTo;
document.getElementById("amountHeader").textContent="Amount / "+symbol();

const body=document.getElementById("itemsBody");
body.innerHTML="";
state.items.forEach((it,i)=>{
const tr=document.createElement("tr");
tr.innerHTML=`
<td>${i+1}</td>
<td contenteditable="true" oninput="state.items[${i}].desc=this.textContent">${it.desc}</td>
<td><input type="number" value="${it.qty}" onchange="state.items[${i}].qty=this.value;recalc()"></td>
<td class="amount"><input type="number" step="0.01" value="${it.unit}" onchange="state.items[${i}].unit=this.value;recalc()"></td>
<td><button class="remove-btn" onclick="state.items.splice(${i},1);renderInvoice()">✕</button></td>
`;
body.appendChild(tr);
});
recalc();
}

function recalc(){
let total=0;
state.items.forEach(it=>total+=it.qty*it.unit);
let disc=state.discount?total*(state.discount/100):0;

const dRow=document.getElementById("discountRow");
if(state.discount>0){
dRow.style.display="flex";
dRow.textContent=`Discount ${state.discount}% applied: -${fmt(disc)}`;
}else{
dRow.style.display="none";
}
document.getElementById("totalValue").textContent=fmt(total-disc);
}

document.getElementById("currencySelect").onchange=e=>{
state.currency=e.target.value;
renderInvoice();
};
document.getElementById("invoiceNumber").oninput=e=>{state.invoiceNumber=e.target.value;renderInvoice();};
document.getElementById("invoiceDate").oninput=e=>{state.date=e.target.value;renderInvoice();};
document.getElementById("billTo").oninput=e=>{state.billTo=e.target.value;renderInvoice();};
document.getElementById("discount").oninput=e=>{state.discount=e.target.value;recalc();};
document.getElementById("addItemBtn").onclick=()=>{state.items.push({desc:"New item",qty:1,unit:0});renderInvoice();};
document.getElementById("clearItems").onclick=()=>{state.items=[];renderInvoice();};

async function downloadPng(){
const el=document.getElementById("invoicePage");
const canvas=await html2canvas(el,{scale:2});
canvas.toBlob(b=>{
const a=document.createElement("a");
a.download=`invoice-${state.invoiceNumber}.png`;
a.href=URL.createObjectURL(b);
a.click();
});
}

async function downloadPdf(){
const el=document.getElementById("invoicePage");
const canvas=await html2canvas(el,{scale:2});
const imgData=canvas.toDataURL("image/png");
const {jsPDF}=window.jspdf;
const pdf=new jsPDF({unit:"pt",format:[canvas.width,canvas.height]});
pdf.addImage(imgData,"PNG",0,0,canvas.width,canvas.height);
pdf.save(`invoice-${state.invoiceNumber}.pdf`);
}

document.getElementById("exportPng").onclick=downloadPng;
document.getElementById("exportPdf").onclick=downloadPdf;

renderInvoice();
</script>
</body>
</html>

